<?php
function FN_SEND_ASYNC($vp_msisdn,$vp_tono,$vp_reason,$vp_isquery,$vp_promo = 0)
{

     global $vg_conf_async_server,$vg_conf_async_port,$vg_conf_async_from;
     $vf_simulador_async=false;
     if ($vf_simulador_async == false)
     {

         if ($vp_promo != 0)
         {
            $vf_mensaje ="GET /cgi-bin/nose?msisdn=".$vp_msisdn."&tone=".$vp_tono."&reason=".$vp_reason."&isquery=".$vp_isquery."&from=".$vg_conf_async_from."&isfake=0&promo=".$vp_promo." HTTP/1.0\n\n";
         }
         else
         {           
            $vf_mensaje ="GET /cgi-bin/nose?msisdn=".$vp_msisdn."&tone=".$vp_tono."&reason=".$vp_reason."&isquery=".$vp_isquery."&from=".$vg_conf_async_from."&isfake=0 HTTP/1.0\n\n";
            //FN_NET_LOGGER("ASYNC -> $vf_mensaje ",5);
         }
         $vf_resultado  = FN_NET_SOCKET($vg_conf_async_server, $vg_conf_async_port, $vf_mensaje);
     }
     else
     {
         if($vp_isquery == 1)
         {
             if (($vp_reason >=2) || ($vp_reason <= 10))
             {
                $rand = rand(0,10);
                if ($rand >=5)
                {
                    return "350";
                }
                elseif ($rand >=2)
                {
                    return "250";
                }

                else
                {
                    return "-1";
                }
             }

         }
         else
         {
             $rand = rand(0,10);

                if ($rand < 1)
                {
                    return "1060";
                }
                elseif ($rand < 2)
                {
                    return "-1";
                }
                else
                {
                    return "0";
                }
         }
     }
     return $vf_resultado;
}

?>
